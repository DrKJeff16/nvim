---@module 'lazy'
return { ---@type LazySpec
  'hedyhli/outline.nvim',
  version = false,
  config = function()
    require('outline').setup({
      outline_window = {
        position = 'right', ---@type 'right'|'left'
        width = 26,
        relative_width = true,
        auto_close = false,
        auto_jump = false,
        jump_highlight_duration = 300,
        center_on_jump = true,
        show_numbers = false,
        show_relative_numbers = false,
        wrap = require('user_api.distro.termux').is_distro(),
        show_cursorline = true,
        hide_cursor = false,
        focus_on_open = true,
        winhl = '',
        no_provider_message = 'No supported provider...',
      },
      outline_items = {
        show_symbol_details = true,
        show_symbol_lineno = true,
        highlight_hovered_item = true,
        auto_set_cursor = true,
        auto_update_events = {
          follow = { 'CursorMoved' },
          items = {
            'InsertLeave',
            'WinEnter',
            'BufEnter',
            'BufWinEnter',
            'TabEnter',
            'BufWritePost',
          },
        },
      },
      guides = { enabled = true, markers = { bottom = '‚îî', middle = '‚îú', vertical = '‚îÇ' } },
      symbol_folding = {
        autofold_depth = false,
        auto_unfold = { hovered = true, only = true },
        markers = { 'Ôë†', 'Ôëº' },
      },
      preview_window = {
        auto_preview = false,
        open_hover_on_preview = false,
        width = 50,
        min_width = 50,
        relative_width = true,
        height = 50,
        min_height = 10,
        relative_height = true,
        border = 'single',
        winhl = 'NormalFloat:',
        winblend = 0,
        live = false,
      },
      keymaps = {
        show_help = '?',
        close = { '<Esc>', 'q' },
        goto_location = '<Cr>',
        peek_location = 'o',
        goto_and_close = '<S-Cr>',
        restore_location = '<C-g>',
        hover_symbol = '<C-space>',
        toggle_preview = 'K',
        rename_symbol = 'r',
        code_actions = 'a',
        fold = 'h',
        unfold = 'l',
        fold_toggle = '<Tab>',
        fold_toggle_all = '<S-Tab>',
        fold_all = 'W',
        unfold_all = 'E',
        fold_reset = 'R',
        down_and_jump = '<C-j>',
        up_and_jump = '<C-k>',
      },
      providers = {
        priority = { 'lsp', 'man', 'markdown' },
        lsp = { blacklist_clients = {} },
        markdown = { filetypes = { 'markdown' } },
      },
      symbols = {
        filter = { 'Package', 'Module', 'Function', 'Class', 'StaticMethod', 'Method', 'Enum' },
        icon_source = 'lspkind',
        icons = {
          Array = { icon = 'Û∞Ö™', hl = 'Constant' },
          Boolean = { icon = '‚ä®', hl = 'Boolean' },
          Class = { icon = 'ùìí', hl = 'Type' },
          Component = { icon = 'Û∞Ö¥', hl = 'Function' },
          Constant = { icon = 'Óà¨', hl = 'Constant' },
          Constructor = { icon = 'Óàè', hl = 'Special' },
          Enum = { icon = '‚Ñ∞', hl = 'Type' },
          EnumMember = { icon = 'ÔÖù', hl = 'Identifier' },
          Event = { icon = 'üó≤', hl = 'Type' },
          Field = { icon = 'Û∞Ü®', hl = 'Identifier' },
          File = { icon = 'Û∞àî', hl = 'Identifier' },
          Fragment = { icon = 'Û∞Ö¥', hl = 'Constant' },
          Function = { icon = 'ÔÇö', hl = 'Function' },
          Interface = { icon = 'Û∞ú∞', hl = 'Type' },
          Key = { icon = 'üîê', hl = 'Type' },
          Macro = { icon = 'ÔÑ∂ ', hl = 'Function' },
          Method = { icon = '∆í', hl = 'Function' },
          Module = { icon = 'Û∞Üß', hl = 'Include' },
          Namespace = { icon = 'Û∞Ö™', hl = 'Include' },
          Null = { icon = 'NULL', hl = 'Type' },
          Number = { icon = '#', hl = 'Number' },
          Object = { icon = '‚¶ø', hl = 'Type' },
          Operator = { icon = '+', hl = 'Identifier' },
          Package = { icon = 'Û∞èó', hl = 'Include' },
          Parameter = { icon = 'Ó™í ', hl = 'Identifier' },
          Property = { icon = 'Óò§', hl = 'Identifier' },
          StaticMethod = { icon = 'Ó™å ', hl = 'Function' },
          String = { icon = 'ùìê', hl = 'String' },
          Struct = { icon = 'ùì¢', hl = 'Structure' },
          TypeAlias = { icon = 'Óùû ', hl = 'Type' },
          TypeParameter = { icon = 'ùôè', hl = 'Identifier' },
          Variable = { icon = 'Óûõ', hl = 'Constant' },
        },
      },
    })

    local desc = require('user_api.maps').desc
    require('user_api.config').keymaps.set({
      n = {
        ['<leader>o'] = { group = '+Outline' },
        ['<leader>ot'] = { require('outline').toggle_outline, desc('Toggle Outline') },
      },
    })
  end,
}
-- vim: set ts=2 sts=2 sw=2 et ai si sta:
